---
name: Menu
---

import { useState, useRef, useEffect } from 'react';
import { Playground, Props } from 'docz';
import '../../dist/css/bolt-css.css';
import { Menu } from '../../dist/js/bolt';

# Menu

A classe menu utiliza a biblioteca popper para manipular o posicionamento dos objetos, para mais detalhes consulte a [documentação](https://popper.js.org/docs/v2/).

<br />

## Propriedades

```typescript
export interface IMenuContent {
  label: string | { first: string; second: string }; // texto do botão
  id: string | number; // id do elemento - será passado como argumento para o evento onSlected
  selected?: boolean; // se o botão deve iniciar selecionado - default = false
  disabled?: boolean; // se true o botão não recebe interações do usuário
}

// Propriedades do construtor
export interface MenuProps {
  ref: HTMLElement; // referência do objeto que abre o menu, geralmente um botão
  content: IMenuContent[]; // conjunto de botões
  classes: string[]; // classes que serão passadas para o container do menu
  popperOptions?: Partial<Options>; // propriedades passadas para o construtor do popper
  arrow?: boolean; // indica se a ponta marcadora está visível - default = true
  color?: 'primary' | 'secondary'; // indica o estilo de cor do list-item - default = 'primary'
}

// construtor
export interface IMenuConstructor {
  new (props?: MenuProps): IMenu;
}

export interface IMenu {
  open: boolean; // indica se o menu está aberto ou fechado, se passar algum valor, o menu abre/true ou fecha/false - default = false
  selected: number | string; // seleciona ou retorna um item pelo id de forma manual
  readonly destroy: () => void; // método público, remove todos os elementos da página

  onClose?: () => void; // disparado quando o menu tem intensão de fechar
  onSelected?: (id: string | number) => void; // disparado quando clica em um elemento do menu
}
```

> Nota: o menu não fecha de forma automatizada, apenas indica que tem intenção de fechar, através do evento onClose. Ou seja,
> deve-se implementar essa função setando a propriedade **open** para false. Esse evento é disparado quando clica em algum elemento do menu ou
> quando aberto clica na área fora do menu. Consulte o exemplo a seguir:

<Playground>
  {() => {
    const [menu, setMenu] = useState(null);
    const [selected, setSelected] = useState('pt');
    //
    const buttonRef = useRef();
    //
    useEffect(() => {
      if (buttonRef.current && !menu) {
        setMenu(
          new Menu({
            ref: buttonRef.current,
            content: [
              { label: 'inglês', id: 'en' },
              { label: 'português', selected: true, id: 'pt' },
              { label: 'espanhol', id: 'es' },
              { label: { first: 'Andy Harris', second: 'and@gmail.com' }, id: 'name', disabled: true },
            ],
            classes: ['tw-w-52'],
          })
        );
      }
      //
      if (menu) {
        menu.onClose = handleClose;
        menu.onSelected = handleSelected;
      }
      //
      return () => {
        if (menu) menu.destroy();
      };
    }, [buttonRef.current, menu]);
    //
    const toggleMenu = () => {
      if (menu) {
        menu.open = !menu.open;
      }
    };
    //
    const handleSelected = (id) => {
      setSelected(id);
    };
    //
    const handleClose = () => {
      if (menu) menu.open = false;
    };
    return (
      <div className="tw-flex">
        <button ref={buttonRef} className="tw-btn tw-btn-primary" onClick={toggleMenu}>
          abrir menu
        </button>
        <div className="tw-ml-7">
          <p className="tw-body2">
            item selecionado: <span className="tw-text-alert">{selected}</span>
          </p>
        </div>
      </div>
    );
  }}
</Playground>
