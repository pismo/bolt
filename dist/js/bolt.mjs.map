{"version":3,"file":"bolt.mjs","sources":["../../src/sidebar/Sidebar.ts","../../src/modal/Modal.ts"],"sourcesContent":["export interface SidebarButton {\n  label: string;\n  level: 1 | 2;\n  icon?: string;\n  name?: string;\n}\n\nexport interface IHeader {\n  icon: string;\n  label: string;\n}\n\nexport interface SidebarProps {\n  container: HTMLElement;\n  header: IHeader;\n  content: SidebarButton[];\n  footerLabel: string;\n  onSelected?: (selected: HTMLElement) => void;\n}\n\nexport interface ISidebarConstructor {\n  new (props: SidebarProps): ISidebar;\n}\n\nexport interface ISidebar {\n  destroy: () => void;\n}\n\nclass Sidebar implements ISidebar {\n  #_container: HTMLElement;\n\n  #_header: HTMLElement;\n\n  #_content: HTMLElement;\n\n  #_footer: HTMLElement;\n\n  #_contentList: { [key: string]: HTMLElement } = {};\n\n  #_onSelected?: (selected: HTMLElement) => void;\n\n  constructor({ container, header, content, footerLabel, onSelected }: SidebarProps) {\n    this.#_onSelected = onSelected;\n\n    this.#_container = container;\n    this.#_container.dataset.testid = 'sidebar';\n    this.#_header = document.createElement('div');\n    this.#_header.dataset.testid = 'header';\n    this.#_content = document.createElement('div');\n    this.#_content.dataset.testid = 'content';\n    this.#_footer = document.createElement('div');\n    this.#_footer.dataset.testid = 'footer';\n\n    this.#_initialize(container, header, content, footerLabel);\n  }\n\n  #_initialize = (container: HTMLElement, header: IHeader, content: SidebarButton[], footerLabel: string): void => {\n    this.#_container.classList.add('tw-sidebar');\n\n    this.#_header.classList.add('tw-sidebar-btn', 'tw-sidebar-btn-l0');\n\n    this.#_content.classList.add('tw-sidebar-content');\n\n    this.#_footer.classList.add('tw-sidebar-btn-footnote');\n\n    this.#_container.appendChild(this.#_header);\n    this.#_container.appendChild(this.#_content);\n    this.#_container.appendChild(this.#_footer);\n\n    const hIcon = document.createElement('span');\n    const hLabel = document.createElement('p');\n    hIcon.classList.add(`tw-i-${header.icon}`, 'tw-sidebar-btn-icon');\n    hLabel.classList.add('tw-sidebar-btn-label');\n    hLabel.innerText = header.label;\n\n    this.#_header.appendChild(hIcon);\n    this.#_header.appendChild(hLabel);\n\n    content.forEach((el, i) => {\n      const id = `${i}-${el.level}-${el.label}`;\n      const child: HTMLElement & { name: string } = document.createElement('button');\n      child.id = id;\n      child.name = el.name || '';\n      child.classList.add('tw-sidebar-btn', `tw-sidebar-btn-l${el.level}`);\n      this.#_contentList[id] = child;\n      let icon: HTMLElement;\n      if (el.icon) {\n        icon = document.createElement('span');\n        icon.classList.add(`tw-i-${el.icon}`, 'tw-sidebar-btn-icon');\n        child.appendChild(icon);\n      }\n\n      const label = document.createElement('p');\n      label.classList.add('tw-sidebar-btn-label');\n      label.innerText = el.label;\n\n      child.appendChild(label);\n      child.addEventListener('click', this.#_clickHandler);\n\n      this.#_content.appendChild(child);\n    });\n\n    const fLabel = document.createElement('p');\n    fLabel.classList.add('tw-sidebar-btn-label');\n    fLabel.innerText = footerLabel;\n\n    this.#_footer.appendChild(fLabel);\n  };\n\n  #_clickHandler = (e: MouseEvent): void => {\n    const target: HTMLElement = e.currentTarget as HTMLElement;\n\n    Object.values(this.#_contentList).map((el: HTMLElement) => el.classList.remove('selected'));\n    target.classList.add('selected');\n\n    if (this.#_onSelected) this.#_onSelected(target);\n  };\n\n  destroy = (): void => {\n    this.#_container.removeChild(this.#_header);\n    this.#_container.removeChild(this.#_content);\n    this.#_container.removeChild(this.#_footer);\n\n    Object.values(this.#_contentList).map((el) => el.removeEventListener('click', this.#_clickHandler));\n\n    this.#_contentList = {};\n  };\n}\n\nexport { Sidebar };\n","export interface IModalConstructor {\n  new (modalContent: HTMLElement): IModal;\n}\n\nexport interface IModal {\n  isOpen: boolean;\n  onClose?: () => void;\n  onStartOpen?: () => void;\n  onEndOpen?: () => void;\n  onStartClose?: () => void;\n  onEndClose?: () => void;\n  readonly destroy: () => void;\n}\n\nclass Modal implements IModal {\n  #_isOpen = false;\n\n  #_container: HTMLElement;\n\n  #_modalContent: HTMLElement;\n\n  #_backdrop: HTMLElement;\n\n  onClose?: () => void;\n\n  onStartOpen?: () => void;\n\n  onEndOpen?: () => void;\n\n  onStartClose?: () => void;\n\n  onEndClose?: () => void;\n\n  constructor(modalContent: HTMLElement) {\n    this.#_modalContent = modalContent;\n\n    this.#_container = document.createElement('div');\n    this.#_backdrop = document.createElement('div');\n    this.#_backdrop.dataset.testid = 'backdrop';\n\n    this.#initialize();\n  }\n\n  get isOpen(): boolean {\n    return this.#_isOpen;\n  }\n\n  set isOpen(value: boolean) {\n    this.#_isOpen = value;\n\n    if (value) {\n      this.#open();\n      return;\n    }\n\n    this.#close();\n  }\n\n  #initialize = (): void => {\n    this.#_container.appendChild(this.#_modalContent);\n    document.body.appendChild(this.#_backdrop);\n    document.body.appendChild(this.#_container);\n\n    this.#_modalContent.style.display = 'none';\n    this.#_container.style.display = 'none';\n    this.#_backdrop.style.display = 'none';\n\n    this.#_container.classList.add('tw-modal');\n    this.#_container.classList.add('tw-modal-close');\n\n    this.#_backdrop.classList.add('tw-modal-backdrop');\n    this.#_backdrop.classList.add('tw-modal-backdrop-close');\n    this.#_backdrop.addEventListener('click', this.#handleClose);\n\n    this.#_modalContent.classList.add('tw-modal-content');\n\n    setTimeout(() => {\n      this.#_container.style.removeProperty('display');\n      this.#_backdrop.style.removeProperty('display');\n      this.#_modalContent.style.removeProperty('display');\n    }, 300);\n  };\n\n  #open = (): void => {\n    this.#_backdrop.addEventListener('transitionstart', this.#startAnimationOpen);\n    this.#_container.addEventListener('transitioncancel', this.#endAnimationOpen);\n    this.#_container.addEventListener('transitionend', this.#endAnimationOpen);\n\n    this.#_backdrop.classList.remove('tw-modal-backdrop-close');\n    this.#_backdrop.classList.add('tw-modal-backdrop-open');\n\n    this.#_container.classList.remove('tw-modal-close');\n    this.#_container.classList.add('tw-modal-open');\n  };\n\n  #close = (): void => {\n    this.#_container.addEventListener('transitionstart', this.#startAnimationClose);\n    this.#_backdrop.addEventListener('transitioncancel', this.#endAnimationClose);\n    this.#_backdrop.addEventListener('transitionend', this.#endAnimationClose);\n\n    this.#_backdrop.classList.remove('tw-modal-backdrop-open');\n    this.#_backdrop.classList.add('tw-modal-backdrop-close');\n\n    this.#_container.classList.remove('tw-modal-open');\n    this.#_container.classList.add('tw-modal-close');\n  };\n\n  #removeAnimationEvent = (): void => {\n    this.#_backdrop.removeEventListener('transitionstart', this.#startAnimationOpen);\n    this.#_container.removeEventListener('transitioncancel', this.#endAnimationOpen);\n    this.#_container.removeEventListener('transitionend', this.#endAnimationOpen);\n\n    this.#_container.removeEventListener('transitionstart', this.#startAnimationClose);\n    this.#_backdrop.removeEventListener('transitioncancel', this.#endAnimationClose);\n    this.#_backdrop.removeEventListener('transitionend', this.#endAnimationClose);\n  };\n\n  #startAnimationOpen = (): void => {\n    this.#_backdrop.removeEventListener('transitionstart', this.#startAnimationOpen);\n\n    if (this.onStartOpen) this.onStartOpen();\n  };\n\n  #endAnimationOpen = (): void => {\n    this.#removeAnimationEvent();\n\n    if (this.onEndOpen) this.onEndOpen();\n  };\n\n  #startAnimationClose = (): void => {\n    this.#_container.removeEventListener('transitionstart', this.#startAnimationClose);\n\n    if (this.onStartClose) this.onStartClose();\n  };\n\n  #endAnimationClose = (): void => {\n    this.#removeAnimationEvent();\n\n    if (this.onEndClose) this.onEndClose();\n  };\n\n  #handleClose = (): void => {\n    if (this.onClose) this.onClose();\n  };\n\n  readonly destroy = (): void => {\n    this.#_container.removeChild(this.#_modalContent);\n    const p: HTMLElement = this.#_container.parentElement as HTMLElement;\n    p.removeChild(this.#_backdrop);\n    p.removeChild(this.#_container);\n    this.#_backdrop.removeEventListener('click', this.#handleClose);\n  };\n}\n\nexport { Modal };\n"],"names":["__container","__privateGet"],"mappings":"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"}